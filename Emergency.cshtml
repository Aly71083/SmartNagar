@{
    Layout = "~/Views/Citizen/_CitizenLayout.cshtml";
    ViewBag.Active = "Emergency";
    ViewBag.FullName = ViewBag.FullName ?? "Citizen";
}

<style>
    .pageTitle {
        font-size: 22px;
        font-weight: 1000;
        margin: 0 0 14px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
    }

    .hint {
        color: #64748b;
        font-weight: 800;
        font-size: 13px;
        margin-top: 6px;
    }

    .heroCard {
        background: linear-gradient(135deg,#ef4444,#f97316);
        color: #fff;
        border-radius: 18px;
        padding: 18px;
        box-shadow: 0 18px 55px rgba(239,68,68,.22);
        border: 1px solid rgba(255,255,255,.2);
    }

    .heroTop {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 14px;
        flex-wrap: wrap;
    }

    .heroTitle {
        font-size: 20px;
        font-weight: 1000;
        margin: 0;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .heroSub {
        margin: 8px 0 0;
        opacity: .95;
        font-weight: 750;
        line-height: 1.6;
        max-width: 820px;
        font-size: 13px;
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 14px;
        margin-top: 14px;
    }

    .card {
        background: #fff;
        border: 1px solid #eef2f7;
        border-radius: 18px;
        padding: 16px;
        box-shadow: 0 10px 24px rgba(15,23,42,.06);
    }

    .svcRow {
        display: flex;
        gap: 12px;
        align-items: flex-start;
    }

    .ico {
        width: 52px;
        height: 52px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        font-size: 20px;
        font-weight: 1000;
        flex: 0 0 auto;
        box-shadow: 0 12px 30px rgba(0,0,0,.08);
    }

    .svcTitle {
        margin: 0;
        font-size: 16px;
        font-weight: 1000;
        color: #0f172a;
    }

    .svcDesc {
        margin: 6px 0 0;
        color: #64748b;
        font-weight: 750;
        font-size: 12px;
        line-height: 1.55;
    }

    .btnRow {
        display: flex;
        gap: 10px;
        margin-top: 14px;
        flex-wrap: wrap;
    }

    .btn {
        border: none;
        cursor: pointer;
        font-weight: 1000;
        border-radius: 14px;
        padding: 10px 12px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        color: #0f172a;
        background: #e2e8f0;
    }

    .btnPrimary {
        background: #ef4444;
        color: #fff;
        box-shadow: 0 16px 40px rgba(239,68,68,.22);
    }

    .btnBlue {
        background: #3b82f6;
        color: #fff;
        box-shadow: 0 16px 40px rgba(59,130,246,.18);
    }

    .btnGreen {
        background: #22c55e;
        color: #fff;
        box-shadow: 0 16px 40px rgba(34,197,94,.18);
    }

    .mini {
        font-size: 12px;
        font-weight: 900;
        color: #64748b;
        margin-top: 10px;
    }

    .tipsGrid {
        display: grid;
        grid-template-columns: 1.2fr .8fr;
        gap: 14px;
        margin-top: 14px;
    }

    .tip {
        background: #fff;
        border: 1px solid #eef2f7;
        border-radius: 18px;
        padding: 16px;
        box-shadow: 0 10px 24px rgba(15,23,42,.06);
    }

        .tip h4 {
            margin: 0 0 8px;
            font-size: 15px;
            font-weight: 1000;
            color: #0f172a;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tip ul {
            margin: 0 0 0 18px;
            padding: 0;
            color: #64748b;
            font-weight: 750;
            font-size: 13px;
            line-height: 1.7;
        }

    .note {
        margin-top: 14px;
        padding: 14px;
        border-radius: 16px;
        background: #fff7ed;
        border: 1px solid #fed7aa;
        color: #9a3412;
        font-weight: 850;
        font-size: 13px;
    }

    @@media(max - width: 1100px)

    {
        .grid

    {
        grid-template-columns: 1fr;
    }

    .tipsGrid {
        grid-template-columns: 1fr;
    }

    }
</style>

<div class="pageTitle">
    <div>🆘 Emergency Services</div>
    <div class="hint">Nepal emergency hotline quick access</div>
</div>

<div class="heroCard">
    <div class="heroTop">
        <div>
            <p class="heroTitle">⚠️ Emergency Quick Actions</p>
            <p class="heroSub">
                If you or someone nearby is in danger, call emergency services immediately.
                Use the buttons below to call or copy the number.
            </p>
        </div>
        <div class="mini">Tip: On mobile, “Call” opens your dialer.</div>
    </div>
</div>

<div class="grid">
    <!-- Police 100 -->
    <div class="card">
        <div class="svcRow">
            <div class="ico" style="background:#3b82f6;">🚓</div>
            <div>
                <h3 class="svcTitle">Police</h3>
                <p class="svcDesc">Crime, threats, violence, suspicious activity, public safety.</p>
                <div class="btnRow">
                    <a class="btn btnBlue" href="tel:100"><i class="fa-solid fa-phone"></i> Call 100</a>
                    <button class="btn" type="button" onclick="copyText('100')"><i class="fa-regular fa-copy"></i> Copy</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ambulance 102 -->
    <div class="card">
        <div class="svcRow">
            <div class="ico" style="background:#ef4444;">🚑</div>
            <div>
                <h3 class="svcTitle">Ambulance</h3>
                <p class="svcDesc">Medical emergencies, serious injury, sudden illness.</p>
                <div class="btnRow">
                    <a class="btn btnPrimary" href="tel:102"><i class="fa-solid fa-phone"></i> Call 102</a>
                    <button class="btn" type="button" onclick="copyText('102')"><i class="fa-regular fa-copy"></i> Copy</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Fire 101 -->
    <div class="card">
        <div class="svcRow">
            <div class="ico" style="background:#f97316;">🔥</div>
            <div>
                <h3 class="svcTitle">Fire Brigade</h3>
                <p class="svcDesc">Fire incidents, smoke, electrical fire hazards, rescue support.</p>
                <div class="btnRow">
                    <a class="btn" style="background:#f97316;color:#fff;" href="tel:101"><i class="fa-solid fa-phone"></i> Call 101</a>
                    <button class="btn" type="button" onclick="copyText('101')"><i class="fa-regular fa-copy"></i> Copy</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Armed Police 1114 -->
    <div class="card">
        <div class="svcRow">
            <div class="ico" style="background:#111827;">🚨</div>
            <div>
                <h3 class="svcTitle">Armed Police Force</h3>
                <p class="svcDesc">High-risk incidents, special security situations.</p>
                <div class="btnRow">
                    <a class="btn" style="background:#111827;color:#fff;" href="tel:1114"><i class="fa-solid fa-phone"></i> Call 1114</a>
                    <button class="btn" type="button" onclick="copyText('1114')"><i class="fa-regular fa-copy"></i> Copy</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Women/Children/Senior 104 -->
    <div class="card">
        <div class="svcRow">
            <div class="ico" style="background:#a855f7;">👩‍🦰</div>
            <div>
                <h3 class="svcTitle">Women, Children & Senior Citizen Service</h3>
                <p class="svcDesc">Support for women/children/senior citizen safety and help.</p>
                <div class="btnRow">
                    <a class="btn" style="background:#a855f7;color:#fff;" href="tel:104"><i class="fa-solid fa-phone"></i> Call 104</a>
                    <button class="btn" type="button" onclick="copyText('104')"><i class="fa-regular fa-copy"></i> Copy</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Child Helpline 1098 -->
    <div class="card">
        <div class="svcRow">
            <div class="ico" style="background:#22c55e;">🧒</div>
            <div>
                <h3 class="svcTitle">Child Helpline</h3>
                <p class="svcDesc">Child protection, abuse reporting, rescue and support.</p>
                <div class="btnRow">
                    <a class="btn btnGreen" href="tel:1098"><i class="fa-solid fa-phone"></i> Call 1098</a>
                    <button class="btn" type="button" onclick="copyText('1098')"><i class="fa-regular fa-copy"></i> Copy</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tourist Police 1144 -->
    <div class="card">
        <div class="svcRow">
            <div class="ico" style="background:#0ea5e9;">🛫</div>
            <div>
                <h3 class="svcTitle">Tourist Police</h3>
                <p class="svcDesc">Support for tourists, lost items, travel assistance.</p>
                <div class="btnRow">
                    <a class="btn" style="background:#0ea5e9;color:#fff;" href="tel:1144"><i class="fa-solid fa-phone"></i> Call 1144</a>
                    <button class="btn" type="button" onclick="copyText('1144')"><i class="fa-regular fa-copy"></i> Copy</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Traffic Police 103 -->
    <div class="card">
        <div class="svcRow">
            <div class="ico" style="background:#f59e0b;">☎️</div>
            <div>
                <h3 class="svcTitle">Traffic Police</h3>
                <p class="svcDesc">Accidents, road block, traffic emergencies & support.</p>
                <div class="btnRow">
                    <a class="btn" style="background:#f59e0b;color:#fff;" href="tel:103"><i class="fa-solid fa-phone"></i> Call 103</a>
                    <button class="btn" type="button" onclick="copyText('103')"><i class="fa-regular fa-copy"></i> Copy</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="tipsGrid">
    <div class="tip">
        <h4>✅ What to tell the operator</h4>
        <ul>
            <li>Your exact location (street, landmark, ward/area).</li>
            <li>What happened (brief & clear).</li>
            <li>How many people are involved / injured.</li>
            <li>Your contact number to call back.</li>
        </ul>
    </div>

    <div class="tip">
        <h4>📍 Quick location helper</h4>
        <ul>
            <li>Enable GPS for accurate location (mobile).</li>
            <li>Use a nearby landmark (school, temple, chowk).</li>
            <li>Stay calm and speak slowly.</li>
        </ul>

        <div class="btnRow" style="margin-top:12px;">
            <button class="btn btnGreen" type="button" onclick="getLocation()">
                <i class="fa-solid fa-location-crosshairs"></i> Get My Location
            </button>
            <button class="btn" type="button" onclick="copyLocation()">
                <i class="fa-regular fa-copy"></i> Copy Location
            </button>
        </div>

        <div class="mini" id="locText" style="margin-top:10px;">Location: not fetched yet</div>
    </div>
</div>

<div class="note">
    ⚠️ This page is for quick access only. For non-emergency civic issues (roads, garbage, water),
    please use <b>Submit Complaint</b>.
</div>

<script>
    let lastLocationText = "";

    function copyText(t) {
        navigator.clipboard.writeText(t)
            .then(() => alert("Copied: " + t))
            .catch(() => alert("Copy failed (browser blocked clipboard)."));
    }

    function getLocation() {
        const el = document.getElementById("locText");

        if (!navigator.geolocation) {
            el.innerText = "Location: Geolocation not supported by your browser.";
            return;
        }

        el.innerText = "Location: fetching...";
        navigator.geolocation.getCurrentPosition(
            (pos) => {
                const lat = pos.coords.latitude.toFixed(6);
                const lng = pos.coords.longitude.toFixed(6);
                lastLocationText = `Lat: ${lat}, Lng: ${lng}`;
                el.innerText = "Location: " + lastLocationText;
            },
            () => {
                el.innerText = "Location: permission denied or unavailable.";
            },
            { enableHighAccuracy: true, timeout: 8000 }
        );
    }

    function copyLocation() {
        if (!lastLocationText) {
            alert("Fetch location first.");
            return;
        }
        navigator.clipboard.writeText(lastLocationText)
            .then(() => alert("Copied: " + lastLocationText))
            .catch(() => alert("Copy failed (browser blocked clipboard)."));
    }
</script>
